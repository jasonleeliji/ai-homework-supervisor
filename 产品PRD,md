# 产品需求文档 (PRD): AI 作业监督员

- **版本:** 1.1 (商业版)
- **最后更新日期:** 2024年5月22日
---

## 1. 项目概述与愿景

“AI 作业监督员”是一款面向中小学生家长的创新型SaaS（软件即服务）应用。它旨在解决家长因工作繁忙而无法时刻陪伴孩子做作业、孩子学习过程中容易分心、学习效率不高等核心痛点。本应用通过调用终端设备（如平板电脑）的摄像头，利用先进的AI视觉分析技术，实时监测孩子的学习状态（是否专注、是否在座），并通过高度拟人化、亲切的语音进行提醒或鼓励。

产品的核心价值主张是：**成为一个有温度的AI伙伴，帮助孩子培养专注、高效的自主学习习惯，同时通过专业、直观的数据报告，让家长以一种全新的、非侵入性的方式，清晰地了解并参与到孩子的成长过程中。**

---

## 2. 目标用户

- **主要用户 (购买者):** 6-15岁孩子的家长。他们认同科技对教育的辅助作用，但又排斥传统监控的冰冷感，寻求一个既能保证学习效果，又能保护孩子自尊心的人性化解决方案。
- **次要用户 (使用者):** 6-15岁的学生。他们是产品的直接体验者，产品的界面、交互和语音反馈必须充分考虑他们的心理感受。

---

## 3. 功能需求详述 (Functional Requirements)

### 模块 3.1: 用户与授权体系

- **3.1.1. 注册:**
    - **流程:** 用户通过输入11位中国大陆手机号码发起注册。
    - **验证:** 系统向该手机号发送一条6位数字短信验证码，用户需在规定时间内（如60秒）回填以完成验证。
- **3.1.2. 登录:**
    - **方式:** 提供“手机号 + 短信验证码”的快捷登录方式。
    - **会话保持:** 登录成功后，系统应保持用户会话状态至少7天，避免在有效期内重复登录。
- **3.1.3. 登出:** 用户可在应用内的“设置”或“我的”页面找到并执行登出操作，清除本地登录状态。
- **3.1.4. 授权码 (家长控制核心):**
    - **设定:** 新用户在完成注册并首次登录后，系统将强制引导用户设定一个4位数字的“家长授权码”。
    - **用途:** 此授权码是访问所有高级设置（见3.7模块）的唯一凭证。
    - **验证:** 每次进入“家长控制与系统设置”模块时，都必须输入正确的授权码。
    - **重置:** 提供“忘记授权码”功能，通过再次向注册手机号发送验证码来允许用户重置新的授权码。

### 模块 3.2: AI 监督核心

- **3.2.1. 视频流获取与展示:** 应用启动“学习会话”后，需获取设备前置摄像头权限，并可在界面一角实时显示视频画面（可由用户选择开启或关闭画面显示，但不影响后台分析）。
- **3.2.2. 定时抓拍与分析:** 在“学习会话”进行中且非“休息”状态时，系统以固定的**20秒/次**的频率，在本地静默抓拍当前帧，并将其发送至云端AI模型进行分析。
- **3.2.3. AI 状态分析:** 云端AI模型对接收到的图片进行分析，必须返回一个包含以下两个布尔值的JSON对象：`{ "is_present": boolean, "is_focused": boolean }`。
- **3.2.4. 智能语音提醒:** 系统前端根据AI返回的状态，结合当前孩子的档案（昵称），从本地预设的话术库中，智能选择一条最合适的语音进行播报。例如：
    - `is_focused: false` -> "小明，要专心一点哦，我们一起加油！"
    - 长时间 `is_focused: true` -> "太棒了，小明保持得非常好！"
- **3.2.5. Token 消耗统计:** (信息展示功能) 界面需清晰展示单次AI分析及当日累计的Token消耗量估算值。

### 模块 3.3: 学习与休息管理

- **3.3.1. 学习会话 (Session):** 用户通过点击“开始学习”按钮，启动一次完整的学习会话。会话可被“结束学习”按钮终止。
- **3.3.2. 强制休息:** 当连续学习时长达到家长设定的**[强制休息触发时长]**时，系统将自动暂停学习会话，并进入**[强制休息时长]**的倒计时。此期间AI监督暂停。
- **3.3.3. 主动休息:** 在学习过程中，用户可点击“我要休息”按钮，选择如“喝水”、“上厕所”等选项，触发一次**[主动休息时长]**的休息。每小时可触发的次数不超过家长设定的**[主动休息次数限制]**。
- **3.3.4. 监督配额消耗:** 用户的“每日监督时长”配额，仅在“学习会话”进行中且非“休息”状态时被消耗。

### 模块 3.4: 订阅与支付

- **3.4.1. 新用户试用:** 新注册用户自动获得为期5天的全功能免费试用。试用期结束后，若未订阅，AI监督功能将被禁用。
- **3.4.2. 订阅计划:**
    - **标准版 (¥19.9/月):** 提供每日3小时的“监督时长”。
    - **专业版 (¥29.9/月):** 提供每日5小时的“监督时长”。
- **3.4.3. 支付集成:** 集成支付宝SDK，支持用户通过扫码或应用内跳转的方式完成订阅支付。
- **3.4.4. 订阅管理:** 用户可在个人中心清晰地看到当前订阅计划、到期时间，并能执行续费或升级操作。

### 模块 3.5: 专注度报告

- **3.5.1. 报告维度:** 系统提供“上次学习”、“今日”、“本周”三个时间维度的学习报告。
- **3.5.2. 报告指标:** 报告需以图表（如饼图、柱状图）和数值的形式，直观展示以下核心指标（具体计算规则见第4章）：
    - 专注率
    - 总学习时长
    - 专注时长
    - 分心时长
    - 离席时长
    - 总休息时长

### 模块 3.6: 个性化档案

- **3.6.1. 孩子档案:** 用户可以设置孩子的昵称、年龄、年级、性别。这些信息将用于个性化语音提醒。

### 模块 3.7: 家长控制与系统设置

- **3.7.1. 访问权限:** 此模块必须通过验证**[家长授权码]**方可进入。
- **3.7.2. 学习规则配置:** 家长可在此处自定义以下规则，所有配置项均有系统建议的默认值和合理的设置范围。
    - **强制休息触发时长:** 默认45分钟 (范围: 25-60分钟)
    - **强制休息时长:** 默认10分钟 (范围: 5-20分钟)
    - **主动休息时长 (单次):** 默认3分钟 (范围: 1-5分钟)
    - **主动休息次数限制 (每小时):** 默认2次 (范围: 1-5次)
- **3.7.3. 提醒设置:**
    - **语音提醒总开关:** 可全局开启或关闭所有AI语音提醒。

---

## 4. 核心业务逻辑定义

- **4.1. 监督时长:** 用户购买的AI服务配额，按天重置。
- **4.2. 学习会话总时长:** 从“开始学习”到“结束学习”的物理时间。
- **4.3. 专注时长:** `is_present: true, is_focused: true` 的总时长。
- **4.4. 分心时长:** `is_present: true, is_focused: false` 的总时长。
- **4.5. 离席时长:** `is_present: false` 的总时长。
- **4.6. 休息时长:** 所有“强制休息”和“主动休息”时间之和。
- **4.7. 总学习时长:** `专注时长 + 分心时长`。
- **4.8. 专注率:** `(专注时长 / 总学习时长) * 100%`。

---

## 5. 非功能性需求

- **5.1. 技术栈要求:**
    - **前端:** React (Vite) + TypeScript + Tailwind CSS
    - **后端:** Node.js (NestJS) + TypeScript
    - **数据库:** MongoDB
    - **AI模型:** 国内可稳定访问的视觉语言模型 (如通义千问VL)。
    - **支付网关:** 支付宝官方SDK。
    - **短信服务:** 阿里云或腾讯云短信服务。
- **5.2. 合规与安全:**
    - 部署于中国大陆服务器，并完成ICP备案。
    - 所有密码、授权码等敏感信息需加盐哈希存储。
    - 通信全程使用HTTPS加密。
    - 明确告知用户摄像头使用权限，并提供隐私政策。
- **5.3. 性能与稳定性:**
    - Web应用首次加载时间（LCP）应小于2.5秒。
    - AI分析+网络请求的总耗时不应超过3秒，避免反馈延迟。
    - 系统需保证99.9%的可用性（7x24小时）。

---